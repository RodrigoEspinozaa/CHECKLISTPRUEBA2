<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Checklist de Información Documentada del SGC</title>
    <style>
        body { font-family: Arial, sans-serif; background: #f8f9fa; }
        table { border-collapse: collapse; width: 100%; background: #fff; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
        th { background: #e9ecef; }
        tr:nth-child(even) { background: #f2f2f2; }
        .yes { background: #28a745 !important; color: #fff !important; }      /* Verde intenso */
        .no { background: #dc3545 !important; color: #fff !important; }       /* Rojo intenso */
        td.alerta { background: #ffc107 !important; color: #212529 !important; }/* Amarillo intenso */
        td.alerta input.alerta {
            background: #ffc107 !important;
            color: #212529 !important;
            font-weight: bold;
        }
        input[type="text"], select { width: 100%; box-sizing: border-box; }
        td:last-child input.alerta {
            width: 100%;
            min-width: 120px;
            font-size: 1.1em;
            font-weight: bold;
            text-align: center;
        }
        tr.pendiente td {
            background: #ffc107 !important;
            color: #212529 !important;
            font-weight: bold;
        }
        /* Estilos para el modal de inicio de sesión */
        #loginModal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #0008;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }
        #loginModal div {
            background: #fff;
            padding: 2em;
            border-radius: 8px;
            box-shadow: 0 0 10px #000;
        }
        #loginError {
            color: red;
            margin-top: 10px;
        }
        #infoGeneral {
            display: flex;
            gap: 1em;
            margin-bottom: 1em;
            background: #3b53a3;
            padding: 1em;
            border-radius: 8px;
            align-items: center;
        }
        #infoGeneral label {
            color: #fff;
            font-weight: bold;
        }
        #infoGeneral select,
        #infoGeneral input {
            background: #6c7fd1;
            color: #fff;
            padding: 0.5em;
            border: none;
            border-radius: 6px;
        }
    </style>
</head>
<body>
    <div id="loginModal" style="position:fixed;top:0;left:0;width:100vw;height:100vh;background:#0008;display:flex;align-items:center;justify-content:center;z-index:1000;">
        <div style="background:#fff;padding:2em;border-radius:8px;box-shadow:0 0 10px #000;">
            <h3>Iniciar sesión</h3>
            <button onclick="loginAsUser()">Usuario</button>
            <button onclick="showAdminPass()">Administrador</button>
            <div id="adminPassDiv" style="display:none;margin-top:1em;">
                <label>Contraseña: <input id="adminPass" type="password"></label>
                <button onclick="loginAsAdmin()">Entrar</button>
            </div>
            <div id="loginError" style="color:red;margin-top:10px;"></div>
        </div>
    </div>
    <div id="infoGeneral" style="display:flex;gap:1em;margin-bottom:1em;background:#3b53a3;padding:1em;border-radius:8px;align-items:center;">
        <div>
            <label style="color:#fff;font-weight:bold;">Proceso<br>
                <select id="proceso" style="background:#6c7fd1;color:#fff;padding:0.5em;border:none;border-radius:6px;width:200px;">
                    <option value="">Seleccionar proceso</option>
                    <option value="ALM Almacén">ALM Almacén</option>
                    <option value="CPS Compras">CPS Compras</option>
                    <option value="HSE Seguridad, salud y medio ambiente">HSE Seguridad, salud y medio ambiente</option>
                    <option value="INF Infraestructura">INF Infraestructura</option>
                    <option value="LAB Laboratorios">LAB Laboratorios</option>
                    <option value="OPE Operaciones">OPE Operaciones</option>
                    <option value="PyS Proyectos y Servicios">PyS Proyectos y Servicios</option>
                    <option value="REF Finanzas">REF Finanzas</option>
                    <option value="REH Gestión de Talento">REH Gestión de Talento</option>
                    <option value="SIG Sistemas Integrados de Gestión">SIG Sistemas Integrados de Gestión</option>
                    <option value="VTA Ventas">VTA Ventas</option>
                    <option value="VTA SUM Ventas de Suministros">VTA SUM Ventas de Suministros</option>
                    <option value="VTA PYT Ventas de Proyectos">VTA PYT Ventas de Proyectos</option>
                </select>
            </label>
        </div>
        <div>
            <label style="color:#fff;font-weight:bold;">Encargado de proceso<br>
                <input id="encargado" type="text" placeholder="Nombre del encargado" style="background:#6c7fd1;color:#fff;padding:0.5em;border:none;border-radius:6px;width:220px;">
            </label>
        </div>
        <div>
            <label style="color:#fff;font-weight:bold;">Fecha de revisión<br>
                <input id="fechaRevision" type="date" style="background:#6c7fd1;color:#fff;padding:0.5em;border:none;border-radius:6px;width:180px;">
            </label>
        </div>
    </div>
    <h2>CHECKLIST DE INFORMACIÓN DOCUMENTADA DEL SGC</h2>
    <table id="checklist">
        <thead>
            <tr>
                <th>Nº</th>
                <th>Inciso de la norma ISO 9001 con el que cumple</th>
                <th>Tipo de documento</th>
                <th>Sí / No</th>
                <th>Fecha de última actualización</th>
                <th>¿Está disponible en la nube? (Sí/No)</th>
                <th>Observaciones</th>
                <th>Alerta</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>1</td>
                <td>4. Contexto de la organización</td>
                <td>¿Participó en el análisis FODA 2025? Análisis FODA SIG-D-03.</td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td>2</td>
                <td>
                    4.2 Comprensión de las necesidades y expectativas de las partes interesadas.<br>
                    <b>7. Apoyo,<br>
                    7.1 Recursos,<br>
                    7.1.2 Personas,<br>
                    7.1.3 Infraestructura,<br>
                    7.1.4 Ambiente para la operación de los procesos,<br>
                    7.4 Comunicación.<br>
                    8. Operación.</b>
                </td>
                <td>
                    Ficha del proceso<br>
                    ¿Realizó la identificación de los requisitos legales y otros aplicables a su proceso?<br>
                    (Disponibilidad de documentos externos).
                </td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td>3</td>
                <td>5.2 Comunicación de la política de calidad</td>
                <td>¿Realizó la difusión de la política de calidad y se asegura de su entendimiento?</td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td>4</td>
                <td><b>5.3 Roles, responsabilidades y autoridades.</b></td>
                <td>Los colaboradores que forman parte del proceso, ¿tienen Descripción de puestos REH-R-07?</td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td rowspan="4">5</td>
                <td rowspan="4">
        <b>6.1 Acciones para abordar riesgos y oportunidades.<br>
        6.3 Planificación de cambios.<br>
        10. Mejora.</b>
    </td>
    <td>¿Tiene identificados riesgos y oportunidades del proceso?</td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
</tr>
<tr>
    <td>Matriz de riesgos y oportunidades SIG-R-20.</td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
</tr>
<tr>
    <td>¿Cuenta con Planificación de las acciones SIG-R-16 para abordar los riesgos y oportunidades identificados en su proceso?</td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
</tr>
<tr>
    <td>¿Cumple con la implementación de las acciones y la evidencia en las fechas establecidas?</td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
</tr>
            <tr>
                <td>6</td>
                <td>
        <b>6.1 Acciones para abordar riesgos y oportunidades.<br>
        6.2 Objetivos de la calidad y planificación para lograrlos.<br>
        10. Mejora.</b>
    </td>
    <td>
        ¿Participa en la Planificación de las acciones SIG-R-16 para abordar los riesgos y oportunidades identificados en FODA SIG-D-03, Partes interesadas SIG-D-04 y objetivos SIG-D-097?
    </td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td>7</td>
                <td>7.1.6 Conocimientos de la organización<br>7.2 Competencia</td>
                <td>¿Realizó la Evaluación de competencias del puesto REH-R-19 y la Detección de necesidades de capacitación REH-R-03 para los colaboradores que forman parte del proceso?</td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td rowspan="2">8</td>
                <td rowspan="2">7.5 Información documentada.<br>8. Operación.</td>
                <td>¿Cuenta con formatos para el desarrollo de su proceso?</td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td>¿Cuenta con códigos o políticas para el desarrollo de su proceso?</td>
                <td>
                    <select onchange="saveChecklist()" class="sn">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
                <td>
                    <select onchange="saveChecklist()" class="nube">
                        <option value=""></option>
                        <option value="Sí">Sí</option>
                        <option value="No">No</option>
                    </select>
                </td>
                <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
                <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
            <tr>
                <td rowspan="2">10</td>
                <td rowspan="2">
        <b>9.1 Seguimiento, medición, análisis y evaluación.</b>
    </td>
    <td>Indicadores de desempeño (REH-R-18 Análisis funcionales de todos los colaboradores que forman parte del proceso).</td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
</tr>
<tr>
    <td>¿Realiza el seguimiento y medición en los periodos establecidos?</td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
</tr>
<tr>
                <td>11</td>
                <td>
        <b>9.1 Seguimiento, medición, análisis y evaluación.</b>
    </td>
    <td>
        ¿Sus no conformidades se encuentran cerradas?
    </td>
    <td>
        <select onchange="saveChecklist()" class="sn">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="date" oninput="saveChecklist()" class="fecha"></td>
    <td>
        <select onchange="saveChecklist()" class="nube">
            <option value=""></option>
            <option value="Sí">Sí</option>
            <option value="No">No</option>
        </select>
    </td>
    <td><input type="text" oninput="saveChecklist()" class="observaciones"></td>
    <td><input type="text" oninput="saveChecklist()" class="alerta"></td>
            </tr>
        </tbody>
    </table>
    <button onclick="resetChecklist()">Reiniciar</button>
    <button onclick="exportChecklist()">Exportar</button>
    <button onclick="saveChecklist()">Guardar CheckList</button>
    <script>
        // Guardar y cargar checklist en localStorage
        function saveChecklist() {
            const rows = document.querySelectorAll('#checklist tbody tr');
            const data = [];
            rows.forEach(row => {
                data.push({
                    sn: row.querySelector('.sn').value,
                    fecha: row.querySelector('.fecha').value,
                    nube: row.querySelector('.nube').value,
                    observaciones: row.querySelector('.observaciones').value,
                    alerta: row.querySelector('.alerta').value
                });
            });
            localStorage.setItem('checklistSGC', JSON.stringify(data));
            updateColors();
        }
        function loadChecklist() {
            const data = JSON.parse(localStorage.getItem('checklistSGC') || '[]');
            const rows = document.querySelectorAll('#checklist tbody tr');
            rows.forEach((row, i) => {
                const item = data[i] || {};
                row.querySelector('.sn').value = item.sn || '';
                row.querySelector('.fecha').value = item.fecha || '';
                row.querySelector('.nube').value = item.nube || '';
                row.querySelector('.observaciones').value = item.observaciones || '';
                row.querySelector('.alerta').value = item.alerta || '';
            });
            updateColors();
        }
        function resetChecklist() {
            localStorage.removeItem('checklistSGC');
            document.querySelectorAll('#checklist tbody select, #checklist tbody input').forEach(el => el.value = '');
            updateColors();
        }
        function exportChecklist() {
            const data = localStorage.getItem('checklistSGC') || '[]';
            const blob = new Blob([data], {type: 'application/json'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'checklistSGC.json';
            a.click();
            URL.revokeObjectURL(url);
        }
        function updateColors() {
            document.querySelectorAll('#checklist tbody tr').forEach(row => {
                row.classList.remove('yes', 'no', 'pendiente');
                const sn = row.querySelector('.sn').value;
                const alertaInput = row.querySelector('.alerta');

                if (sn === 'Sí') {
                    alertaInput.value = 'Atendido';
                    row.classList.add('yes');
                } else if (sn === 'No') {
                    alertaInput.value = 'Requiere atención';
                    row.classList.add('no');
                } else {
                    alertaInput.value = 'Pendiente';
                    row.classList.add('pendiente');
                }
            });
        }
        function loginAsUser() {
            const user = document.getElementById('loginUser').value;
            const pass = document.getElementById('loginPass').value;
            if (user === 'admin' && pass === '1234') {
                document.getElementById('loginModal').style.display = 'none';
                loadChecklist();
            } else {
                document.getElementById('loginError').innerText = 'Usuario o contraseña incorrectos';
            }
        }
        function showAdminPass() {
            document.getElementById('adminPassDiv').style.display = 'block';
        }
        function loginAsAdmin() {
            const pass = document.getElementById('adminPass').value;
            if (pass === '1234') {
                document.getElementById('loginModal').style.display = 'none';
                loadChecklist();
            } else {
                document.getElementById('loginError').innerText = 'Contraseña de administrador incorrecta';
            }
        }
        window.onload = () => {
            document.getElementById('loginModal').style.display = 'flex';
        };
    </script>
</body>
</html>